<ion-header>
  <ion-toolbar>
    <ion-title>MILO: Machine Intelligence Learning Optimizer</ion-title>
    <ion-buttons slot='end' class='ion-padding-end'>
      <ion-button fill='solid' color='primary' (click)='stepper.reset()' *ngIf='uploadForm.valid && trainForm.valid'>
        <ion-icon slot='start' name='add'></ion-icon>
        Start New Search
      </ion-button>
      <ion-button fill="solid" color='primary' (click)='exportCSV()' *ngIf='stepper?.selectedIndex === 2'>
        <ion-icon slot='start' name='download'></ion-icon>
        Export
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<div class='container'>
  <mat-horizontal-stepper #stepper linear>
    <mat-step label='Select Data' [stepControl]='uploadForm' [editable]='!uploadForm.valid' errorMessage='Data upload is required.'>
      <app-upload [stepFinished]='stepFinished'></app-upload>
    </mat-step>
    <mat-step label='Train' [stepControl]='trainForm' [editable]='!trainForm.valid' errorMessage='Pipeline elements need selection.'>
      <app-train [stepFinished]='stepFinished' [featureCount]='featureCount'></app-train>
    </mat-step>
    <mat-step label='View Results'>
      <app-results [isActive]='stepper?.selectedIndex === 2'></app-results>
    </mat-step>
  </mat-horizontal-stepper>
</div>
