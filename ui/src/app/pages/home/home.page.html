<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Home
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class='ion-padding'>
  <form [formGroup]='uploadForm'>
    <ion-card class='ion-padding ion-text-center'>
      <ion-card-header>
        <ion-card-subtitle>Please provide a training test set and a separate test set used for generalization. Both data sets must have the same columns.</ion-card-subtitle>
        <ion-card-title>Data Upload</ion-card-title>
      </ion-card-header>

      <label class='file-input'>
        <ion-icon *ngIf='uploadForm.get("train").valid' name="checkmark-circle-outline" color="success"></ion-icon>
        Select Training Data
        <input type='file' name='train' (change)="onFileSelect($event)">
      </label>
      <label class='file-input'>
        <ion-icon *ngIf='uploadForm.get("test").valid' name="checkmark-circle-outline" color="success"></ion-icon>
        Select Test Data (Generalization)
        <input type='file' name='test' (change)="onFileSelect($event)">
      </label>
      <ion-select placeholder='Target Column' interface='popover' [disabled]='!labels.length' formControlName='label_column'>
        <ion-select-option *ngFor='let label of labels' [value]='label'>{{label}}</ion-select-option>
      </ion-select>
    </ion-card>

    <ion-card class='ion-padding ion-text-center'>
      <ion-card-header>
        <ion-card-subtitle>Select pipeline processors that you would like to enable.</ion-card-subtitle>
        <ion-card-title>Pipeline Elements</ion-card-title>
      </ion-card-header>

      <div class='pipeline-selection'>
        <div formArrayName='estimators'>
          Estimators<br>
          <mat-checkbox *ngFor='let estimator of pipelineProcessors.estimators; let i=index' [formControlName]='i'>{{estimator.label}}</mat-checkbox>
        </div>
        <div formArrayName='scalers'>
          Scalers<br>
          <mat-checkbox *ngFor='let scaler of pipelineProcessors.scalers; let i=index' [formControlName]='i'>{{scaler.label}}</mat-checkbox>
        </div>
        <div formArrayName='featureSelectors'>
          Feature Selectors<br>
          <mat-checkbox *ngFor='let featureSelector of pipelineProcessors.featureSelectors; let i=index' [formControlName]='i'>{{featureSelector.label}}</mat-checkbox>
        </div>
        <div formArrayName='searchers'>
          Searchers<br>
          <mat-checkbox *ngFor='let searcher of pipelineProcessors.searchers; let i=index' [formControlName]='i'>{{searcher.label}}</mat-checkbox>
        </div>
        <div formArrayName='scorers'>
          Scorers<br>
          <mat-checkbox *ngFor='let scorer of pipelineProcessors.scorers; let i=index' [formControlName]='i'>{{scorer.label}}</mat-checkbox>
        </div>
      </div>
    </ion-card>

    <ion-button expand='block' class='ion-padding' (click)='onSubmit()' [disabled]='!uploadForm.valid'>Submit</ion-button>
  </form>
</ion-content>
